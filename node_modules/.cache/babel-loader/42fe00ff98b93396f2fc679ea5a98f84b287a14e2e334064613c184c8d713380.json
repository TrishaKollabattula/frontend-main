{"ast":null,"code":"import _objectSpread from\"C:/Users/Vibek Rana/Pictures/frontend-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import'./UserProfile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserProfile=()=>{var _userData$username;const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isEditing,setIsEditing]=useState(false);const[editForm,setEditForm]=useState({name:'',email:'',business_type:'',scheduled_time:'',color_theme:[]});const[saveLoading,setSaveLoading]=useState(false);const[profileImage,setProfileImage]=useState(null);const[profileImagePreview,setProfileImagePreview]=useState(null);const[uploadingImage,setUploadingImage]=useState(false);const[businessLogo,setBusinessLogo]=useState(null);const[businessLogoPreview,setBusinessLogoPreview]=useState(null);const[uploadingLogo,setUploadingLogo]=useState(false);const fileInputRef=useRef(null);const logoInputRef=useRef(null);const API_BASE_URL='http://13.233.45.167:5000';useEffect(()=>{fetchUserProfile();const savedTheme=localStorage.getItem('theme')||'light';document.body.className=savedTheme;},[]);const fetchUserProfile=async()=>{try{setLoading(true);const token=localStorage.getItem('token')||localStorage.getItem('authToken')||localStorage.getItem('auth_token');if(!token){setError('Not authenticated - Please log in again');setLoading(false);setTimeout(()=>{window.location.href='/login';},2000);return;}const response=await fetch(\"\".concat(API_BASE_URL,\"/user/profile\"),{method:'GET',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(!response.ok){throw new Error('Failed to fetch profile');}const data=await response.json();console.log('Profile data:',data);setUserData(data);let colorTheme=data.color_theme||[];if(typeof colorTheme==='string'&&colorTheme!=='Not set'){try{colorTheme=JSON.parse(colorTheme);}catch(e){colorTheme=[];}}else if(colorTheme==='Not set'){colorTheme=[];}if(data.has_logo&&data.logo_s3_url){setBusinessLogoPreview(data.logo_s3_url);}setEditForm({name:data.name||'',email:data.email||'',business_type:data.business_type||'Not specified',scheduled_time:data.scheduled_time&&data.scheduled_time!=='Not set'?data.scheduled_time:'',color_theme:Array.isArray(colorTheme)?colorTheme:[]});setError(null);}catch(err){setError(err.message);}finally{setLoading(false);}};const handleEditToggle=()=>{if(isEditing){let colorTheme=userData.color_theme||[];if(typeof colorTheme==='string'&&colorTheme!=='Not set'){try{colorTheme=JSON.parse(colorTheme);}catch(e){colorTheme=[];}}else if(colorTheme==='Not set'){colorTheme=[];}setEditForm({name:userData.name||'',email:userData.email||'',business_type:userData.business_type||'Not specified',scheduled_time:userData.scheduled_time&&userData.scheduled_time!=='Not set'?userData.scheduled_time:'',color_theme:Array.isArray(colorTheme)?colorTheme:[]});setProfileImage(null);setProfileImagePreview(null);setBusinessLogo(null);setBusinessLogoPreview(userData.logo_s3_url||null);}setIsEditing(!isEditing);};const handleInputChange=e=>{const{name,value}=e.target;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleColorChange=(index,value)=>{const newColors=[...editForm.color_theme];newColors[index]=value;setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{color_theme:newColors}));};const addColorSlot=()=>{if(editForm.color_theme.length<5){setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{color_theme:[...prev.color_theme,'#000000']}));}};const removeColorSlot=index=>{const newColors=editForm.color_theme.filter((_,i)=>i!==index);setEditForm(prev=>_objectSpread(_objectSpread({},prev),{},{color_theme:newColors}));};const handleProfileImageSelect=e=>{const file=e.target.files[0];if(!file)return;const allowedTypes=['image/png','image/jpeg','image/jpg'];if(!allowedTypes.includes(file.type)){alert('Please upload a PNG or JPG file');return;}const maxSize=5*1024*1024;if(file.size>maxSize){alert('Image size must be less than 5MB');return;}setProfileImage(file);const reader=new FileReader();reader.onloadend=()=>{setProfileImagePreview(reader.result);};reader.readAsDataURL(file);};const handleLogoSelect=e=>{const file=e.target.files[0];if(!file)return;const allowedTypes=['image/png','image/jpeg','image/jpg'];if(!allowedTypes.includes(file.type)){alert('Please upload a PNG or JPG file for logo');return;}const maxSize=5*1024*1024;if(file.size>maxSize){alert('Logo size must be less than 5MB');return;}setBusinessLogo(file);const reader=new FileReader();reader.onloadend=()=>{setBusinessLogoPreview(reader.result);};reader.readAsDataURL(file);};const uploadProfileImage=async imageFile=>{try{const token=localStorage.getItem('token')||localStorage.getItem('authToken')||localStorage.getItem('auth_token');const reader=new FileReader();return new Promise((resolve,reject)=>{reader.onloadend=async()=>{try{const base64Data=reader.result;const response=await fetch(\"\".concat(API_BASE_URL,\"/user/upload-profile-image\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({image_data:base64Data,file_name:imageFile.name,file_type:imageFile.type,file_size:imageFile.size})});if(!response.ok){throw new Error('Failed to upload profile image');}const result=await response.json();resolve(result.image_url);}catch(err){reject(err);}};reader.onerror=()=>reject(new Error('Failed to read file'));reader.readAsDataURL(imageFile);});}catch(err){throw err;}};const formatDate=timestamp=>{if(!timestamp)return'N/A';const date=new Date(parseInt(timestamp)*1000);return date.toLocaleDateString()+' '+date.toLocaleTimeString();};const handleSaveProfile=async()=>{try{setSaveLoading(true);const token=localStorage.getItem('token')||localStorage.getItem('authToken')||localStorage.getItem('auth_token');if(!token){alert('Authentication token not found. Please log in again.');window.location.href='/login';return;}// Upload profile image if selected\nif(profileImage){setUploadingImage(true);try{await uploadProfileImage(profileImage);console.log('Profile image uploaded successfully');}catch(err){console.error('Failed to upload profile image:',err);alert('Failed to upload profile image: '+err.message);}finally{setUploadingImage(false);}}// Prepare profile update data (name and email only)\nconst profileUpdateData={};if(editForm.name!==userData.name){profileUpdateData.name=editForm.name;}if(editForm.email!==userData.email){profileUpdateData.email=editForm.email;}// Prepare preferences update data (business_type, scheduled_time, color_theme, logo)\nconst preferencesUpdateData={};// Business type goes to preferences/survey\nif(editForm.business_type!==userData.business_type){preferencesUpdateData.business_type=editForm.business_type;}if(editForm.scheduled_time!==userData.scheduled_time&&editForm.scheduled_time!==''){preferencesUpdateData.scheduled_time=editForm.scheduled_time;}let currentColorTheme=userData.color_theme||[];if(typeof currentColorTheme==='string'&&currentColorTheme!=='Not set'){try{currentColorTheme=JSON.parse(currentColorTheme);}catch(e){currentColorTheme=[];}}else if(currentColorTheme==='Not set'){currentColorTheme=[];}if(JSON.stringify(editForm.color_theme)!==JSON.stringify(currentColorTheme)){preferencesUpdateData.color_theme=editForm.color_theme;}// Handle logo upload\nif(businessLogo){setUploadingLogo(true);try{const reader=new FileReader();const logoData=await new Promise((resolve,reject)=>{reader.onloadend=()=>resolve(reader.result);reader.onerror=reject;reader.readAsDataURL(businessLogo);});preferencesUpdateData.logo_data={data:logoData,fileName:businessLogo.name,fileType:businessLogo.type,fileSize:businessLogo.size};}catch(err){console.error('Failed to process logo:',err);alert('Failed to process logo: '+err.message);}finally{setUploadingLogo(false);}}// Update profile if there are changes\nif(Object.keys(profileUpdateData).length>0){const profileResponse=await fetch(\"\".concat(API_BASE_URL,\"/user/profile\"),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(profileUpdateData)});if(!profileResponse.ok){throw new Error('Failed to update profile');}}// Update preferences if there are changes\nif(Object.keys(preferencesUpdateData).length>0){console.log('Updating preferences with:',preferencesUpdateData);const preferencesResponse=await fetch(\"\".concat(API_BASE_URL,\"/user/preferences\"),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(preferencesUpdateData)});if(!preferencesResponse.ok){const errorData=await preferencesResponse.json();throw new Error(errorData.error||'Failed to update preferences');}}alert('Profile updated successfully!');await fetchUserProfile();setIsEditing(false);setProfileImage(null);setProfileImagePreview(null);setBusinessLogo(null);}catch(err){alert('Error updating profile: '+err.message);console.error('Save error:',err);}finally{setSaveLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading profile...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"Error: \",error]})});}if(!userData){return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"No user data found\"})});}let displayColorTheme=userData.color_theme||[];if(typeof displayColorTheme==='string'&&displayColorTheme!=='Not set'){try{displayColorTheme=JSON.parse(displayColorTheme);}catch(e){displayColorTheme=[];}}else if(displayColorTheme==='Not set'){displayColorTheme=[];}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-avatar\",onClick:()=>{var _fileInputRef$current;return isEditing&&((_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click());},children:[profileImagePreview?/*#__PURE__*/_jsx(\"img\",{src:profileImagePreview,alt:\"Profile\",className:\"avatar-image\"}):userData.profile_image?/*#__PURE__*/_jsx(\"img\",{src:userData.profile_image,alt:\"Profile\",className:\"avatar-image\"}):/*#__PURE__*/_jsx(\"span\",{children:(_userData$username=userData.username)===null||_userData$username===void 0?void 0:_userData$username.charAt(0).toUpperCase()}),isEditing&&/*#__PURE__*/_jsx(\"div\",{className:\"avatar-overlay\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCF7\"})})]}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/png,image/jpeg,image/jpg\",onChange:handleProfileImageSelect,style:{display:'none'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:userData.username}),/*#__PURE__*/_jsx(\"p\",{className:\"email\",children:userData.email})]}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-profile-btn\",onClick:handleEditToggle,disabled:saveLoading||uploadingImage||uploadingLogo,children:isEditing?'Cancel':'Edit Profile'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Business Type\"}),isEditing?/*#__PURE__*/_jsxs(\"select\",{name:\"business_type\",value:editForm.business_type,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Not specified\",children:\"Not specified\"}),/*#__PURE__*/_jsx(\"option\",{value:\"finance\",children:\"Finance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"education\",children:\"Education\"}),/*#__PURE__*/_jsx(\"option\",{value:\"technology\",children:\"Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"real-estate\",children:\"Real Estate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"healthcare\",children:\"Healthcare\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ecommerce\",children:\"E-commerce\"}),/*#__PURE__*/_jsx(\"option\",{value:\"restaurant\",children:\"Restaurant\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]}):/*#__PURE__*/_jsx(\"p\",{children:userData.business_type||'Not specified'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Member Since\"}),/*#__PURE__*/_jsx(\"p\",{children:userData.created_at?formatDate(userData.created_at):'Recently'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Posts Created\"}),/*#__PURE__*/_jsx(\"p\",{children:userData.posts_created||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Accounts Connected\"}),/*#__PURE__*/_jsxs(\"p\",{children:[userData.connected_accounts||0,\"/4\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Scheduled Time\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"time\",name:\"scheduled_time\",value:editForm.scheduled_time,onChange:handleInputChange,className:\"time-input\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"scheduled-time-display\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time-icon\",children:\"\\uD83D\\uDD50\"}),/*#__PURE__*/_jsx(\"p\",{children:userData.scheduled_time||'Not set'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card color-theme-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Brand Colors\"}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"color-editor\",children:[editForm.color_theme.map((color,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"color-input-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color,onChange:e=>handleColorChange(index,e.target.value),className:\"color-picker\"}),/*#__PURE__*/_jsx(\"span\",{className:\"color-hex\",children:color}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeColorSlot(index),className:\"remove-color-btn\",children:\"\\u2715\"})]},index)),editForm.color_theme.length<5&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addColorSlot,className:\"add-color-btn\",children:\"+ Add Color\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"color-theme-display\",children:Array.isArray(displayColorTheme)&&displayColorTheme.length>0?displayColorTheme.map((color,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"color-preview\",style:{background:color},title:color},index)):/*#__PURE__*/_jsx(\"p\",{children:\"Not set\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"business-logo-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Business Logo\"}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"logo-upload-area\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-preview-box\",onClick:()=>{var _logoInputRef$current;return(_logoInputRef$current=logoInputRef.current)===null||_logoInputRef$current===void 0?void 0:_logoInputRef$current.click();},children:businessLogoPreview?/*#__PURE__*/_jsx(\"img\",{src:businessLogoPreview,alt:\"Business Logo\",className:\"logo-preview-image\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"logo-placeholder\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"upload-icon\",children:\"\\uD83D\\uDCF7\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Click to upload logo\"})]})}),/*#__PURE__*/_jsx(\"input\",{ref:logoInputRef,type:\"file\",accept:\"image/png,image/jpeg,image/jpg\",onChange:handleLogoSelect,style:{display:'none'}}),businessLogoPreview&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-logo-btn\",onClick:()=>{setBusinessLogo(null);setBusinessLogoPreview(null);},children:\"Remove Logo\"})]}):businessLogoPreview?/*#__PURE__*/_jsxs(\"div\",{className:\"logo-display\",children:[/*#__PURE__*/_jsx(\"img\",{src:businessLogoPreview,alt:\"Business Logo\"}),/*#__PURE__*/_jsx(\"p\",{children:userData.logo_filename||'Your business logo'})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No logo uploaded\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Profile Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Full Name\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:editForm.name,onChange:handleInputChange,placeholder:\"Enter your full name\"}):/*#__PURE__*/_jsx(\"p\",{children:userData.name||'Not provided'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email Address\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:editForm.email,onChange:handleInputChange,placeholder:\"Enter your email\"}):/*#__PURE__*/_jsx(\"p\",{children:userData.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"p\",{children:userData.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Updated\"}),/*#__PURE__*/_jsx(\"p\",{children:userData.updated_at?formatDate(userData.updated_at):'Never'})]}),isEditing&&/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:handleSaveProfile,disabled:saveLoading||uploadingImage||uploadingLogo,children:uploadingLogo?'Uploading Logo...':uploadingImage?'Uploading Image...':saveLoading?'Saving...':'Save Changes'})]})]});};export default UserProfile;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","UserProfile","_userData$username","userData","setUserData","loading","setLoading","error","setError","isEditing","setIsEditing","editForm","setEditForm","name","email","business_type","scheduled_time","color_theme","saveLoading","setSaveLoading","profileImage","setProfileImage","profileImagePreview","setProfileImagePreview","uploadingImage","setUploadingImage","businessLogo","setBusinessLogo","businessLogoPreview","setBusinessLogoPreview","uploadingLogo","setUploadingLogo","fileInputRef","logoInputRef","API_BASE_URL","fetchUserProfile","savedTheme","localStorage","getItem","document","body","className","token","setTimeout","window","location","href","response","fetch","concat","method","headers","ok","Error","data","json","console","log","colorTheme","JSON","parse","e","has_logo","logo_s3_url","Array","isArray","err","message","handleEditToggle","handleInputChange","value","target","prev","_objectSpread","handleColorChange","index","newColors","addColorSlot","length","removeColorSlot","filter","_","i","handleProfileImageSelect","file","files","allowedTypes","includes","type","alert","maxSize","size","reader","FileReader","onloadend","result","readAsDataURL","handleLogoSelect","uploadProfileImage","imageFile","Promise","resolve","reject","base64Data","stringify","image_data","file_name","file_type","file_size","image_url","onerror","formatDate","timestamp","date","Date","parseInt","toLocaleDateString","toLocaleTimeString","handleSaveProfile","profileUpdateData","preferencesUpdateData","currentColorTheme","logoData","logo_data","fileName","fileType","fileSize","Object","keys","profileResponse","preferencesResponse","errorData","children","displayColorTheme","onClick","_fileInputRef$current","current","click","src","alt","profile_image","username","charAt","toUpperCase","ref","accept","onChange","style","display","disabled","created_at","posts_created","connected_accounts","map","color","background","title","_logoInputRef$current","logo_filename","placeholder","updated_at"],"sources":["C:/Users/Vibek Rana/Pictures/frontend-main/src/components/UserProfile.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './UserProfile.css';\r\n\r\nconst UserProfile = () => {\r\n  const [userData, setUserData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editForm, setEditForm] = useState({\r\n    name: '',\r\n    email: '',\r\n    business_type: '',\r\n    scheduled_time: '',\r\n    color_theme: []\r\n  });\r\n  const [saveLoading, setSaveLoading] = useState(false);\r\n  const [profileImage, setProfileImage] = useState(null);\r\n  const [profileImagePreview, setProfileImagePreview] = useState(null);\r\n  const [uploadingImage, setUploadingImage] = useState(false);\r\n  const [businessLogo, setBusinessLogo] = useState(null);\r\n  const [businessLogoPreview, setBusinessLogoPreview] = useState(null);\r\n  const [uploadingLogo, setUploadingLogo] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n  const logoInputRef = useRef(null);\r\n\r\n  const API_BASE_URL = 'http://13.233.45.167:5000';\r\n\r\n  useEffect(() => {\r\n    fetchUserProfile();\r\n    \r\n    const savedTheme = localStorage.getItem('theme') || 'light';\r\n    document.body.className = savedTheme;\r\n  }, []);\r\n\r\n  const fetchUserProfile = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token') || \r\n                    localStorage.getItem('authToken') || \r\n                    localStorage.getItem('auth_token');\r\n      \r\n      if (!token) {\r\n        setError('Not authenticated - Please log in again');\r\n        setLoading(false);\r\n        setTimeout(() => {\r\n          window.location.href = '/login';\r\n        }, 2000);\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(`${API_BASE_URL}/user/profile`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch profile');\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('Profile data:', data);\r\n      setUserData(data);\r\n      \r\n      let colorTheme = data.color_theme || [];\r\n      if (typeof colorTheme === 'string' && colorTheme !== 'Not set') {\r\n        try {\r\n          colorTheme = JSON.parse(colorTheme);\r\n        } catch (e) {\r\n          colorTheme = [];\r\n        }\r\n      } else if (colorTheme === 'Not set') {\r\n        colorTheme = [];\r\n      }\r\n      \r\n      if (data.has_logo && data.logo_s3_url) {\r\n        setBusinessLogoPreview(data.logo_s3_url);\r\n      }\r\n      \r\n      setEditForm({\r\n        name: data.name || '',\r\n        email: data.email || '',\r\n        business_type: data.business_type || 'Not specified',\r\n        scheduled_time: data.scheduled_time && data.scheduled_time !== 'Not set' ? data.scheduled_time : '',\r\n        color_theme: Array.isArray(colorTheme) ? colorTheme : []\r\n      });\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEditToggle = () => {\r\n    if (isEditing) {\r\n      let colorTheme = userData.color_theme || [];\r\n      if (typeof colorTheme === 'string' && colorTheme !== 'Not set') {\r\n        try {\r\n          colorTheme = JSON.parse(colorTheme);\r\n        } catch (e) {\r\n          colorTheme = [];\r\n        }\r\n      } else if (colorTheme === 'Not set') {\r\n        colorTheme = [];\r\n      }\r\n      \r\n      setEditForm({\r\n        name: userData.name || '',\r\n        email: userData.email || '',\r\n        business_type: userData.business_type || 'Not specified',\r\n        scheduled_time: userData.scheduled_time && userData.scheduled_time !== 'Not set' ? userData.scheduled_time : '',\r\n        color_theme: Array.isArray(colorTheme) ? colorTheme : []\r\n      });\r\n      setProfileImage(null);\r\n      setProfileImagePreview(null);\r\n      setBusinessLogo(null);\r\n      setBusinessLogoPreview(userData.logo_s3_url || null);\r\n    }\r\n    setIsEditing(!isEditing);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditForm(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleColorChange = (index, value) => {\r\n    const newColors = [...editForm.color_theme];\r\n    newColors[index] = value;\r\n    setEditForm(prev => ({\r\n      ...prev,\r\n      color_theme: newColors\r\n    }));\r\n  };\r\n\r\n  const addColorSlot = () => {\r\n    if (editForm.color_theme.length < 5) {\r\n      setEditForm(prev => ({\r\n        ...prev,\r\n        color_theme: [...prev.color_theme, '#000000']\r\n      }));\r\n    }\r\n  };\r\n\r\n  const removeColorSlot = (index) => {\r\n    const newColors = editForm.color_theme.filter((_, i) => i !== index);\r\n    setEditForm(prev => ({\r\n      ...prev,\r\n      color_theme: newColors\r\n    }));\r\n  };\r\n\r\n  const handleProfileImageSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      alert('Please upload a PNG or JPG file');\r\n      return;\r\n    }\r\n\r\n    const maxSize = 5 * 1024 * 1024;\r\n    if (file.size > maxSize) {\r\n      alert('Image size must be less than 5MB');\r\n      return;\r\n    }\r\n\r\n    setProfileImage(file);\r\n    \r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setProfileImagePreview(reader.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const handleLogoSelect = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      alert('Please upload a PNG or JPG file for logo');\r\n      return;\r\n    }\r\n\r\n    const maxSize = 5 * 1024 * 1024;\r\n    if (file.size > maxSize) {\r\n      alert('Logo size must be less than 5MB');\r\n      return;\r\n    }\r\n\r\n    setBusinessLogo(file);\r\n    \r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setBusinessLogoPreview(reader.result);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const uploadProfileImage = async (imageFile) => {\r\n    try {\r\n      const token = localStorage.getItem('token') || \r\n                    localStorage.getItem('authToken') || \r\n                    localStorage.getItem('auth_token');\r\n      \r\n      const reader = new FileReader();\r\n      return new Promise((resolve, reject) => {\r\n        reader.onloadend = async () => {\r\n          try {\r\n            const base64Data = reader.result;\r\n            const response = await fetch(`${API_BASE_URL}/user/upload-profile-image`, {\r\n              method: 'POST',\r\n              headers: {\r\n                'Authorization': `Bearer ${token}`,\r\n                'Content-Type': 'application/json'\r\n              },\r\n              body: JSON.stringify({\r\n                image_data: base64Data,\r\n                file_name: imageFile.name,\r\n                file_type: imageFile.type,\r\n                file_size: imageFile.size\r\n              })\r\n            });\r\n\r\n            if (!response.ok) {\r\n              throw new Error('Failed to upload profile image');\r\n            }\r\n\r\n            const result = await response.json();\r\n            resolve(result.image_url);\r\n          } catch (err) {\r\n            reject(err);\r\n          }\r\n        };\r\n        reader.onerror = () => reject(new Error('Failed to read file'));\r\n        reader.readAsDataURL(imageFile);\r\n      });\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const formatDate = (timestamp) => {\r\n    if (!timestamp) return 'N/A';\r\n    const date = new Date(parseInt(timestamp) * 1000);\r\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\r\n  };\r\n\r\n  const handleSaveProfile = async () => {\r\n    try {\r\n      setSaveLoading(true);\r\n      const token = localStorage.getItem('token') || \r\n                    localStorage.getItem('authToken') || \r\n                    localStorage.getItem('auth_token');\r\n      \r\n      if (!token) {\r\n        alert('Authentication token not found. Please log in again.');\r\n        window.location.href = '/login';\r\n        return;\r\n      }\r\n      \r\n      // Upload profile image if selected\r\n      if (profileImage) {\r\n        setUploadingImage(true);\r\n        try {\r\n          await uploadProfileImage(profileImage);\r\n          console.log('Profile image uploaded successfully');\r\n        } catch (err) {\r\n          console.error('Failed to upload profile image:', err);\r\n          alert('Failed to upload profile image: ' + err.message);\r\n        } finally {\r\n          setUploadingImage(false);\r\n        }\r\n      }\r\n      \r\n      // Prepare profile update data (name and email only)\r\n      const profileUpdateData = {};\r\n      if (editForm.name !== userData.name) {\r\n        profileUpdateData.name = editForm.name;\r\n      }\r\n      if (editForm.email !== userData.email) {\r\n        profileUpdateData.email = editForm.email;\r\n      }\r\n\r\n      // Prepare preferences update data (business_type, scheduled_time, color_theme, logo)\r\n      const preferencesUpdateData = {};\r\n      \r\n      // Business type goes to preferences/survey\r\n      if (editForm.business_type !== userData.business_type) {\r\n        preferencesUpdateData.business_type = editForm.business_type;\r\n      }\r\n      \r\n      if (editForm.scheduled_time !== userData.scheduled_time && editForm.scheduled_time !== '') {\r\n        preferencesUpdateData.scheduled_time = editForm.scheduled_time;\r\n      }\r\n      \r\n      let currentColorTheme = userData.color_theme || [];\r\n      if (typeof currentColorTheme === 'string' && currentColorTheme !== 'Not set') {\r\n        try {\r\n          currentColorTheme = JSON.parse(currentColorTheme);\r\n        } catch (e) {\r\n          currentColorTheme = [];\r\n        }\r\n      } else if (currentColorTheme === 'Not set') {\r\n        currentColorTheme = [];\r\n      }\r\n      \r\n      if (JSON.stringify(editForm.color_theme) !== JSON.stringify(currentColorTheme)) {\r\n        preferencesUpdateData.color_theme = editForm.color_theme;\r\n      }\r\n\r\n      // Handle logo upload\r\n      if (businessLogo) {\r\n        setUploadingLogo(true);\r\n        try {\r\n          const reader = new FileReader();\r\n          const logoData = await new Promise((resolve, reject) => {\r\n            reader.onloadend = () => resolve(reader.result);\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(businessLogo);\r\n          });\r\n\r\n          preferencesUpdateData.logo_data = {\r\n            data: logoData,\r\n            fileName: businessLogo.name,\r\n            fileType: businessLogo.type,\r\n            fileSize: businessLogo.size\r\n          };\r\n        } catch (err) {\r\n          console.error('Failed to process logo:', err);\r\n          alert('Failed to process logo: ' + err.message);\r\n        } finally {\r\n          setUploadingLogo(false);\r\n        }\r\n      }\r\n\r\n      // Update profile if there are changes\r\n      if (Object.keys(profileUpdateData).length > 0) {\r\n        const profileResponse = await fetch(`${API_BASE_URL}/user/profile`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(profileUpdateData)\r\n        });\r\n\r\n        if (!profileResponse.ok) {\r\n          throw new Error('Failed to update profile');\r\n        }\r\n      }\r\n\r\n      // Update preferences if there are changes\r\n      if (Object.keys(preferencesUpdateData).length > 0) {\r\n        console.log('Updating preferences with:', preferencesUpdateData);\r\n        const preferencesResponse = await fetch(`${API_BASE_URL}/user/preferences`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify(preferencesUpdateData)\r\n        });\r\n\r\n        if (!preferencesResponse.ok) {\r\n          const errorData = await preferencesResponse.json();\r\n          throw new Error(errorData.error || 'Failed to update preferences');\r\n        }\r\n      }\r\n      \r\n      alert('Profile updated successfully!');\r\n      await fetchUserProfile();\r\n      setIsEditing(false);\r\n      setProfileImage(null);\r\n      setProfileImagePreview(null);\r\n      setBusinessLogo(null);\r\n      \r\n    } catch (err) {\r\n      alert('Error updating profile: ' + err.message);\r\n      console.error('Save error:', err);\r\n    } finally {\r\n      setSaveLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"profile-container\">\r\n        <div className=\"loading\">Loading profile...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"profile-container\">\r\n        <div className=\"error\">Error: {error}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!userData) {\r\n    return (\r\n      <div className=\"profile-container\">\r\n        <div className=\"error\">No user data found</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  let displayColorTheme = userData.color_theme || [];\r\n  if (typeof displayColorTheme === 'string' && displayColorTheme !== 'Not set') {\r\n    try {\r\n      displayColorTheme = JSON.parse(displayColorTheme);\r\n    } catch (e) {\r\n      displayColorTheme = [];\r\n    }\r\n  } else if (displayColorTheme === 'Not set') {\r\n    displayColorTheme = [];\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <div className=\"profile-header\">\r\n        <div className=\"profile-avatar\" onClick={() => isEditing && fileInputRef.current?.click()}>\r\n          {profileImagePreview ? (\r\n            <img src={profileImagePreview} alt=\"Profile\" className=\"avatar-image\" />\r\n          ) : userData.profile_image ? (\r\n            <img src={userData.profile_image} alt=\"Profile\" className=\"avatar-image\" />\r\n          ) : (\r\n            <span>{userData.username?.charAt(0).toUpperCase()}</span>\r\n          )}\r\n          {isEditing && (\r\n            <div className=\"avatar-overlay\">\r\n              <span>üì∑</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\"image/png,image/jpeg,image/jpg\"\r\n          onChange={handleProfileImageSelect}\r\n          style={{ display: 'none' }}\r\n        />\r\n        <div className=\"profile-info\">\r\n          <h2>{userData.username}</h2>\r\n          <p className=\"email\">{userData.email}</p>\r\n        </div>\r\n        <button \r\n          className=\"edit-profile-btn\"\r\n          onClick={handleEditToggle}\r\n          disabled={saveLoading || uploadingImage || uploadingLogo}\r\n        >\r\n          {isEditing ? 'Cancel' : 'Edit Profile'}\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"profile-stats\">\r\n        <div className=\"stat-card\">\r\n          <h3>Business Type</h3>\r\n          {isEditing ? (\r\n            <select\r\n              name=\"business_type\"\r\n              value={editForm.business_type}\r\n              onChange={handleInputChange}\r\n            >\r\n              <option value=\"Not specified\">Not specified</option>\r\n              <option value=\"finance\">Finance</option>\r\n              <option value=\"education\">Education</option>\r\n              <option value=\"technology\">Technology</option>\r\n              <option value=\"real-estate\">Real Estate</option>\r\n              <option value=\"healthcare\">Healthcare</option>\r\n              <option value=\"ecommerce\">E-commerce</option>\r\n              <option value=\"restaurant\">Restaurant</option>\r\n              <option value=\"other\">Other</option>\r\n            </select>\r\n          ) : (\r\n            <p>{userData.business_type || 'Not specified'}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"stat-card\">\r\n          <h3>Member Since</h3>\r\n          <p>{userData.created_at ? formatDate(userData.created_at) : 'Recently'}</p>\r\n        </div>\r\n\r\n        <div className=\"stat-card\">\r\n          <h3>Posts Created</h3>\r\n          <p>{userData.posts_created || 0}</p>\r\n        </div>\r\n\r\n        <div className=\"stat-card\">\r\n          <h3>Accounts Connected</h3>\r\n          <p>{userData.connected_accounts || 0}/4</p>\r\n        </div>\r\n\r\n        <div className=\"stat-card\">\r\n          <h3>Scheduled Time</h3>\r\n          {isEditing ? (\r\n            <input\r\n              type=\"time\"\r\n              name=\"scheduled_time\"\r\n              value={editForm.scheduled_time}\r\n              onChange={handleInputChange}\r\n              className=\"time-input\"\r\n            />\r\n          ) : (\r\n            <div className=\"scheduled-time-display\">\r\n              <span className=\"time-icon\">üïê</span>\r\n              <p>{userData.scheduled_time || 'Not set'}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"stat-card color-theme-card\">\r\n          <h3>Brand Colors</h3>\r\n          {isEditing ? (\r\n            <div className=\"color-editor\">\r\n              {editForm.color_theme.map((color, index) => (\r\n                <div key={index} className=\"color-input-row\">\r\n                  <input\r\n                    type=\"color\"\r\n                    value={color}\r\n                    onChange={(e) => handleColorChange(index, e.target.value)}\r\n                    className=\"color-picker\"\r\n                  />\r\n                  <span className=\"color-hex\">{color}</span>\r\n                  <button \r\n                    type=\"button\"\r\n                    onClick={() => removeColorSlot(index)}\r\n                    className=\"remove-color-btn\"\r\n                  >\r\n                    ‚úï\r\n                  </button>\r\n                </div>\r\n              ))}\r\n              {editForm.color_theme.length < 5 && (\r\n                <button \r\n                  type=\"button\"\r\n                  onClick={addColorSlot}\r\n                  className=\"add-color-btn\"\r\n                >\r\n                  + Add Color\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"color-theme-display\">\r\n              {Array.isArray(displayColorTheme) && displayColorTheme.length > 0 ? (\r\n                displayColorTheme.map((color, index) => (\r\n                  <div \r\n                    key={index}\r\n                    className=\"color-preview\" \r\n                    style={{ background: color }}\r\n                    title={color}\r\n                  ></div>\r\n                ))\r\n              ) : (\r\n                <p>Not set</p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"business-logo-section\">\r\n        <h3>Business Logo</h3>\r\n        {isEditing ? (\r\n          <div className=\"logo-upload-area\">\r\n            <div \r\n              className=\"logo-preview-box\" \r\n              onClick={() => logoInputRef.current?.click()}\r\n            >\r\n              {businessLogoPreview ? (\r\n                <img src={businessLogoPreview} alt=\"Business Logo\" className=\"logo-preview-image\" />\r\n              ) : (\r\n                <div className=\"logo-placeholder\">\r\n                  <span className=\"upload-icon\">üì∑</span>\r\n                  <p>Click to upload logo</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <input\r\n              ref={logoInputRef}\r\n              type=\"file\"\r\n              accept=\"image/png,image/jpeg,image/jpg\"\r\n              onChange={handleLogoSelect}\r\n              style={{ display: 'none' }}\r\n            />\r\n            {businessLogoPreview && (\r\n              <button \r\n                type=\"button\"\r\n                className=\"remove-logo-btn\"\r\n                onClick={() => {\r\n                  setBusinessLogo(null);\r\n                  setBusinessLogoPreview(null);\r\n                }}\r\n              >\r\n                Remove Logo\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : businessLogoPreview ? (\r\n          <div className=\"logo-display\">\r\n            <img src={businessLogoPreview} alt=\"Business Logo\" />\r\n            <p>{userData.logo_filename || 'Your business logo'}</p>\r\n          </div>\r\n        ) : (\r\n          <p>No logo uploaded</p>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"profile-details\">\r\n        <h3>Profile Details</h3>\r\n        \r\n        <div className=\"detail-row\">\r\n          <label>Full Name</label>\r\n          {isEditing ? (\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={editForm.name}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Enter your full name\"\r\n            />\r\n          ) : (\r\n            <p>{userData.name || 'Not provided'}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"detail-row\">\r\n          <label>Email Address</label>\r\n          {isEditing ? (\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={editForm.email}\r\n              onChange={handleInputChange}\r\n              placeholder=\"Enter your email\"\r\n            />\r\n          ) : (\r\n            <p>{userData.email}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"detail-row\">\r\n          <label>Username</label>\r\n          <p>{userData.username}</p>\r\n        </div>\r\n\r\n        <div className=\"detail-row\">\r\n          <label>Last Updated</label>\r\n          <p>{userData.updated_at ? formatDate(userData.updated_at) : 'Never'}</p>\r\n        </div>\r\n\r\n        {isEditing && (\r\n          <button \r\n            className=\"save-btn\" \r\n            onClick={handleSaveProfile}\r\n            disabled={saveLoading || uploadingImage || uploadingLogo}\r\n          >\r\n            {uploadingLogo ? 'Uploading Logo...' : uploadingImage ? 'Uploading Image...' : saveLoading ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}